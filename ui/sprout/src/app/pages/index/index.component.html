<div class="flex h-full">
  <div
    class="p-4 flex-col gap-4 border-r border-zinc-300 dark:border-zinc-700 w-56 lg:w-64 hidden lg:flex transition-[width] shrink-0"
    [ngClass]="{ 'sm:flex': !isSidebarVisible }"
  >
    <div class="h-10 flex gap-2 items-center">
      <div class="flex items-center gap-2 mr-auto">
        <root-avatar
          value="Kian Alikhani"
          class="hidden md:inline-flex"
        ></root-avatar>
        <div>Workspace</div>
      </div>
      <button
        class="hidden lg:inline-flex shrink-0"
        rootButton
        shape="circle"
        modifier="ghost"
      >
        <ng-icon name="heroArrowPath"></ng-icon>
      </button>
      <button
        class="shrink-0 lg:hidden"
        rootButton
        shape="circle"
        modifier="ghost"
        (click)="toggleSidebar()"
      >
        <ng-icon name="heroChevronLeft"></ng-icon>
      </button>
    </div>
    <div class="flex flex-col md:pl-4 lg:pl-8 gap-8">
      <div class="flex flex-col">
        <div class="mb-2">Quick links</div>
        <a
          class="cursor-pointer hover:bg-white/5 -ml-8 pl-8 rounded-md py-2 flex items-center gap-2 text-sm text-zinc-800 dark:text-zinc-200"
          *ngFor="let quickLink of quickLinks"
          (click)="openFolder(quickLink)"
        >
          <div class="w-6">
            <svg
              *ngIf="quickLink.icon"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
              class="size-5"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"
              />
            </svg>
          </div>
          <div>
            {{ quickLink.title }}
            <span class="text-zinc-600 dark:text-zinc-400">{{
              quickLink.count
            }}</span>
          </div>
        </a>
      </div>
      <div class="flex flex-col">
        <div class="mb-2">Folders</div>
        <a
          class="cursor-pointer hover:bg-white/5 -ml-8 pl-8 rounded-md py-2 flex items-center gap-2 text-sm text-zinc-800 dark:text-zinc-200"
          *ngFor="let folder of folders"
        >
          <div class="w-6">
            <svg
              *ngIf="folder.icon"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
              class="size-5"
              [ngClass]="folder.color"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"
              />
            </svg>
          </div>
          <div>
            {{ folder.title }}
            <span class="text-zinc-600 dark:text-zinc-400">{{
              folder.count
            }}</span>
          </div>
        </a>
      </div>
      <div class="flex flex-col">
        <div class="mb-2">Tags</div>
        <a
          class="cursor-pointer hover:bg-white/5 -ml-8 pl-8 rounded-md py-2 flex items-center gap-2 text-sm text-zinc-800 dark:text-zinc-200"
          *ngFor="let tag of tags"
        >
          <div class="w-6">
            <svg
              *ngIf="tag.icon"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="2"
              stroke="currentColor"
              class="size-5"
              [ngClass]="tag.color"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"
              />
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M6 6h.008v.008H6V6Z"
              />
            </svg>
          </div>
          <div>
            {{ tag.title }}
            <span class="text-zinc-600 dark:text-zinc-400">{{
              tag.count
            }}</span>
          </div>
        </a>
      </div>
    </div>
  </div>
  <div
    class="p-4 pb-0 flex-col gap-4 border-r border-zinc-300 dark:border-zinc-700 hidden sm:flex sm:w-56 md:w-80 shrink-0 transition-[width]"
  >
    <div class="h-10 flex items-center gap-4">
      <button
        rootButton
        shape="circle"
        modifier="ghost"
        (click)="toggleSidebar()"
        class="shrink-0 inline-block lg:hidden"
        [ngClass]="{
          'sm:hidden': !isSidebarVisible,
        }"
      >
        <ng-icon name="heroChevronRight"></ng-icon>
      </button>
      <root-icon-field class="grow hidden md:inline-block">
        <svg
          rootInputIcon
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="2"
          stroke="currentColor"
          class="size-4"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"
          />
        </svg>
        <input class="w-full" rootInput placeholder="Search" />
      </root-icon-field>
      <button
        rootButton
        shape="circle"
        modifier="primary"
        class="shrink-0 ml-auto"
      >
        <ng-icon name="heroPlus"></ng-icon>
      </button>
    </div>
    <div
      class="flex flex-col gap-4"
      *ngIf="!folderState.loading; else folderLoading"
    >
      <div class="flex items-center gap-4 mb-4">
        <ng-icon name="heroBoltSlash"></ng-icon>
        <div>{{ folderState.data.title }}</div>
      </div>
      <a
        class="flex gap-4 hover:bg-black/5 hover:dark:bg-white/5 active:bg-black/10 active:dark:bg-white/10 cursor-pointer px-4 -mx-4 pt-4 -mt-4"
        *ngFor="let note of folderState.data.notes"
        (click)="openNote(note)"
      >
        <div
          class="bg-red-800 dark:bg-red-200 w-4 h-4 rounded-full shrink-0 mt-1"
        ></div>
        <div class="w-full truncate">
          <div>{{ note.title }}</div>
          <div class="truncate text-zinc-600 dark:text-zinc-400 text-sm">
            {{ note.date | date: "shortDate" }} {{ note.content }}
          </div>
          <hr class="mt-4 -mr-4 border-zinc-700" />
        </div>
      </a>
    </div>
    <ng-template #folderLoading>
      <div class="flex flex-col gap-4">
        <div class="flex gap-4 mb-4 items-center py-1">
          <root-shimmer
            widthClass="w-4"
            borderRadiusClass="rounded-full"
          ></root-shimmer>
          <root-shimmer class="w-full" widthClass="w-1/3"></root-shimmer>
        </div>
        <div class="flex gap-4" *ngFor="let i of [].constructor(3)">
          <root-shimmer
            class="mt-1"
            widthClass="w-4"
            borderRadiusClass="rounded-full"
          ></root-shimmer>
          <div class="flex flex-col w-full">
            <root-shimmer class="w-1/3 py-1"></root-shimmer>
            <root-shimmer
              widthClass="w-full"
              class="py-[3px]"
              heightClass="h-[14px]"
            ></root-shimmer>
            <hr class="mt-4 border-zinc-700" />
          </div>
        </div>
      </div>
    </ng-template>
  </div>
  <div
    class="p-4 pb-0 grow flex flex-col gap-4 bg-zinc-200 dark:bg-zinc-800 max-h-lvh"
  >
    <div class="h-10 flex items-center justify-between" id="editorHeader">
      <ng-container *ngIf="!noteState.loading">
        <!-- Something C -->
        <div class="flex items-center gap-4 min-w-[208px]">
          <div class="text-nowrap">
            {{ folderState.data.title }}
          </div>
          <button
            rootButton
            modifier="ghost"
            class="flex items-center gap-2 shrink-0"
          >
            <ng-icon name="heroTag"></ng-icon>
            <div>Add tags</div>
          </button>
        </div>
        <div class="flex min-w-[120px] shrink">
          <button
            rootButton
            shape="circle"
            modifier="ghost"
            *ngFor="
              let visibleAction of [].constructor(
                editorActions.length > visibleEditorActions
                  ? visibleEditorActions - 1
                  : visibleEditorActions
              );
              index as i
            "
          >
            <ng-icon [name]="editorActions[i].icon"></ng-icon>
          </button>
          <button *ngIf="editorActions.length > visibleEditorActions">
            <button rootButton shape="circle" modifier="ghost">
              <ng-icon name="heroEllipsisHorizontal"></ng-icon>
            </button>
          </button>
        </div>
      </ng-container>
    </div>
    <div class="-mx-4 px-8 grow overflow-y-auto">
      <sprout-note-editor
        [content]="noteState.data.content"
        *ngIf="!noteState.loading; else noteLoading"
      ></sprout-note-editor>
      <ng-template #noteLoading>
        <div class="flex flex-col">
          <root-shimmer
            class="py-[9px]"
            heightClass="h-[36px]"
            widthClass="w-1/2"
            backgroundColorClass="bg-zinc-300 dark:bg-zinc-700"
          ></root-shimmer>
          <root-shimmer
            class="py-[4px] mt-2 mb-4"
            backgroundColorClass="bg-zinc-300 dark:bg-zinc-700"
            rows="5"
          ></root-shimmer>
          <root-shimmer
            class="py-[7.5px]"
            heightClass="h-[30px]"
            widthClass="w-1/2"
            backgroundColorClass="bg-zinc-300 dark:bg-zinc-700"
          ></root-shimmer>
          <root-shimmer
            class="py-[4px] mt-2 mb-4"
            backgroundColorClass="bg-zinc-300 dark:bg-zinc-700"
            rows="5"
          ></root-shimmer>
          <root-shimmer
            class="py-[7.5px]"
            heightClass="h-[30px]"
            widthClass="w-1/2"
            backgroundColorClass="bg-zinc-300 dark:bg-zinc-700"
          ></root-shimmer>
          <root-shimmer
            class="py-[4px] mt-2 mb-4"
            backgroundColorClass="bg-zinc-300 dark:bg-zinc-700"
            rows="5"
          ></root-shimmer>
        </div>
      </ng-template>
    </div>
  </div>
</div>
